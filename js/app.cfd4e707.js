(function(){"use strict";var e={9679:function(e,a,n){var t=n(9242),r=n(3396),u=n(7139),l=n(4870),s=n(340),o=n(7425),i=n(7795),c=n(9232),v=n(1294);const p={apiKey:"AIzaSyDtoefEgH0mUewHdAKTpgNGGdH3GLVHgPE",authDomain:"ask-app-ver2.firebaseapp.com",projectId:"ask-app-ver2",storageBucket:"ask-app-ver2.appspot.com",messagingSenderId:"827686819453",appId:"1:827686819453:web:762f30772095d872a8c314"},d=(0,i.ZF)(p),D=(0,s.v0)(d),U=(0,c.ad)(d),g=((0,v.cF)(d),{class:"Auth"}),m=(0,r._)("span",{class:"authSpan"}," 로그인을 진행해주세요. ",-1),h=["onSubmit"],w=(0,r._)("span",null," Sign Up ",-1),f=(0,r._)("br",null,null,-1),y=(0,r._)("button",null," OK ",-1),C=["onSubmit"],I=(0,r._)("span",null," Log In ",-1),k=(0,r._)("br",null,null,-1),_=(0,r._)("button",null," OK ",-1);var b={__name:"Auth",props:{Step:Number},setup(e){const a=e,n=(0,l.iH)(""),u=(0,l.iH)(""),i=(0,l.iH)(""),c=(0,l.iH)(""),v=(0,l.iH)([]),p=async e=>{e.preventDefault(),await(0,s.Xb)(D,n.value,u.value).then((e=>{alert("회원가입이 완료되었습니다."),console.log("user info : "+e.user.email),c.value=e.user.uid})),await(0,o.pl)((0,o.JU)(U,"Users",c.value),{Email:n.value,DisplayName:i.value,Date:new Date,UID:c.value}),n.value="",u.value="",i.value=""},d=async e=>{e.preventDefault(),await(0,s.e5)(D,n.value,u.value).then((e=>{alert("로그인이 완료되었습니다."),console.log("user info "+e.user.email),console.log(e.user),v.value=e.user})),n.value="",u.value=""};return console.log(a.Step),(a,l)=>((0,r.wg)(),(0,r.iD)("div",g,[m,2==e.Step?((0,r.wg)(),(0,r.iD)("form",{key:0,onSubmit:(0,t.iM)(p,["prevent"]),class:"SignupForm"},[w,f,(0,r.wy)((0,r._)("input",{type:"email",placeholder:"Email","onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),required:""},null,512),[[t.nr,n.value]]),(0,r.wy)((0,r._)("input",{type:"password",placeholder:"Password","onUpdate:modelValue":l[1]||(l[1]=e=>u.value=e),required:""},null,512),[[t.nr,u.value]]),(0,r._)("div",null,[(0,r.wy)((0,r._)("input",{type:"text",placeholder:"Display name","onUpdate:modelValue":l[2]||(l[2]=e=>i.value=e),required:""},null,512),[[t.nr,i.value]])]),y],40,h)):(0,r.kq)("",!0),1==e.Step?((0,r.wg)(),(0,r.iD)("form",{key:1,onSubmit:(0,t.iM)(d,["prevent"]),class:"LoginForm"},[I,k,(0,r.wy)((0,r._)("input",{type:"email",placeholder:"Email","onUpdate:modelValue":l[3]||(l[3]=e=>n.value=e),required:""},null,512),[[t.nr,n.value]]),(0,r.wy)((0,r._)("input",{type:"password",placeholder:"Password","onUpdate:modelValue":l[4]||(l[4]=e=>u.value=e),required:""},null,512),[[t.nr,u.value]]),_],40,C)):(0,r.kq)("",!0)]))}};const M=b;var S=M;n(7658);const H={class:"MSG"},O={key:0,class:"chat-content"},E={class:"owner-chat-box xmine"},q={key:1,class:"chat-content"},N={class:"chat-box mine"};var x={__name:"ChatMSG",props:{CurrentUser:Object,counterpartUID:String},setup(e){const a=e,n=(0,l.iH)([]);return(0,r.bv)((()=>{(0,o.cf)((0,o.IO)((0,o.hJ)(U,"Users/"+a.CurrentUser.UID+"/Message"),(0,o.ar)("ChatUserUID","array-contains",a.counterpartUID)),(0,o.Xo)("sendDate","desc"),(e=>{e.forEach((e=>{n.value=e.data().regions,console.log(e.data())}))}))})),(e,a)=>((0,r.wg)(),(0,r.iD)("div",H,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.value,((e,a)=>((0,r.wg)(),(0,r.iD)("div",{key:a},[e.CurrentUserUID?((0,r.wg)(),(0,r.iD)("ul",O,[(0,r._)("li",null,[(0,r._)("span",E,(0,u.zw)(e.sendMSG),1)])])):(0,r.kq)("",!0),e.counterpartUID?((0,r.wg)(),(0,r.iD)("ul",q,[(0,r._)("li",null,[(0,r._)("span",N,(0,u.zw)(e.sendMSG),1)])])):(0,r.kq)("",!0)])))),128))]))}};const A=x;var J=A;const j=["onSubmit"],T=(0,r._)("button",null," Send ",-1);var F={__name:"Input",props:{CurrentUser:Object,counterpartUID:String,CurrentMessageDocID:String,CounterpartMessageDocID:String},setup(e){const a=e,n=(0,l.iH)(""),u=async e=>{e.preventDefault();const t=(0,o.JU)(U,"Users/"+a.CurrentUser.UID+"/Message/"+a.CurrentMessageDocID);await(0,o.r7)(t,{regions:(0,o.vr)({counterpartUID:a.counterpartUID,sendMSG:n.value,sendNAME:a.CurrentUser.DisplayName,sendDATE:Date.now()})});const r=(0,o.JU)(U,"Users/"+a.counterpartUID+"/Message/"+a.CounterpartMessageDocID);await(0,o.r7)(r,{regions:(0,o.vr)({CurrentUserUID:a.counterpartUID,sendMSG:n.value,sendNAME:a.CurrentUser.DisplayName,sendDATE:Date.now()})}),n.value=""};return(e,a)=>((0,r.wg)(),(0,r.iD)("form",{onSubmit:(0,t.iM)(u,["prevent"]),class:"inputForm"},[(0,r._)("div",null,[(0,r.wy)((0,r._)("input",{type:"text",placeholder:"message",required:"","onUpdate:modelValue":a[0]||(a[0]=e=>n.value=e)},null,512),[[t.nr,n.value]]),T])],40,j))}};const G=F;var L=G;const V={class:"ChatList"},z=(0,r._)("h4",null," User List ",-1),K={key:0,class:"chatRoom"},P=["onClick"],B={key:1,class:"chatMessage"},W=["onClick"],X={key:1},Y={class:"MsgForm"},Q={class:"InputForm"},R=["onClick"];var Z={__name:"ChatList",props:{CurrentUser:Object},setup(e){const a=e,n=(0,l.iH)(!1),s=(0,l.iH)([]),o=(0,l.iH)(""),i=(0,l.iH)(""),v=(0,l.iH)(""),p=(0,l.iH)("");(0,r.bv)((async()=>{const e=await(0,c.PL)((0,c.hJ)(U,"Users"));let a=[];e.forEach((e=>{const n={docID:e.id,Date:e.data().Date,DisplayName:e.data().DisplayName,Email:e.data().Email,UID:e.data().UID};a.push(n)})),s.value=a}));const d=async e=>{v.value="",o.value="",n.value=!0,o.value=e.target.innerText,(0,c.cf)((0,c.IO)((0,c.hJ)(U,"Users/"+a.CurrentUser.UID+"/Message"),(0,c.ar)("ChatUserUID","array-contains",o.value)),(e=>{e.forEach((e=>{v.value=e.id,console.log(e.data())}))})),(0,c.cf)((0,c.IO)((0,c.hJ)(U,"Users/"+o.value+"/Message"),(0,c.ar)("ChatUserUID","array-contains",a.CurrentUser.UID)),(e=>{e.forEach((e=>{p.value=e.id}))}));const t=(0,c.JU)(U,"Users",o.value),r=await(0,c.QT)(t);r.exists()&&(i.value=r.data().DisplayName)},D=async()=>{let e=window.confirm("채팅방을 개설하시겠습니까?");e&&(await(0,c.ET)((0,c.hJ)(U,"Users/"+o.value+"/Message"),{ChatUserUID:[o.value,a.CurrentUser.UID]}),await(0,c.ET)((0,c.hJ)(U,"Users/"+a.CurrentUser.UID+"/Message"),{ChatUserUID:[o.value,a.CurrentUser.UID]}),console.log("채팅방이 개설 되었습니다."))},g=()=>{n.value=!1};return(l,c)=>((0,r.wg)(),(0,r.iD)("div",V,[0==n.value?((0,r.wg)(),(0,r.iD)("form",{key:0,onSubmit:c[0]||(c[0]=(0,t.iM)(((...e)=>l.onSubmit&&l.onSubmit(...e)),["prevent"]))},[z,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.value,((e,n)=>((0,r.wg)(),(0,r.iD)("div",{key:n},[e.DisplayName!==a.CurrentUser.DisplayName?((0,r.wg)(),(0,r.iD)("div",K,[(0,r._)("h5",null,[(0,r.Uk)((0,u.zw)(e.DisplayName)+" ",1),(0,r._)("button",{onClick:(0,t.iM)(d,["prevent"]),class:"btnUID"},(0,u.zw)(e.UID),9,P)])])):(0,r.kq)("",!0)])))),128))],32)):(0,r.kq)("",!0),1==n.value?((0,r.wg)(),(0,r.iD)("div",B,[(0,r._)("h4",null,(0,u.zw)(i.value),1),v.value?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("button",{key:0,onClick:(0,t.iM)(D,["prevent"]),class:"startChatBtn"}," 채팅방 개설하기 ",8,W)),v.value?((0,r.wg)(),(0,r.iD)("div",X,[(0,r._)("div",Y,[(0,r.Wm)(J,{CurrentUser:e.CurrentUser,counterpartUID:o.value},null,8,["CurrentUser","counterpartUID"])]),(0,r._)("div",Q,[(0,r.Wm)(L,{CurrentUser:e.CurrentUser,counterpartUID:o.value,CurrentMessageDocID:v.value,CounterpartMessageDocID:p.value},null,8,["CurrentUser","counterpartUID","CurrentMessageDocID","CounterpartMessageDocID"])])])):(0,r.kq)("",!0),(0,r._)("button",{onClick:(0,t.iM)(g,["prevent"]),class:"backButton"}," 이전 ",8,R)])):(0,r.kq)("",!0)]))}};const $=Z;var ee=$,ae=n(199);const ne={class:"AppSide"},te={class:"header"},re=(0,r._)("h4",null," VueKao Talk ",-1),ue={key:0,class:"authForm"},le={key:1,class:"chatlist"},se={key:0},oe=["onClick"];var ie={__name:"App",setup(e){const a=(0,l.iH)(0),n=(0,l.iH)(!0),s=(0,l.iH)(!1),o=(0,l.iH)(""),i=(0,l.iH)([]),v=(0,l.iH)([]);(0,r.bv)((()=>{D.onAuthStateChanged((e=>{null!=e?(s.value=!0,n.value=!0,o.value="welcome",(0,c.cf)((0,c.IO)((0,c.hJ)(U,"Users"),(0,c.ar)("UID","==",e.uid)),(e=>{e.forEach((e=>{i.value=e.data()})),console.log(v.value)})),a.value=3):(s.value=!1,n.value=!1,o.value="please login")}))}));const p=()=>{(0,ae.w7)(D)};return(e,l)=>((0,r.wg)(),(0,r.iD)("div",ne,[(0,r._)("div",te,[re,(0,r._)("h6",null,(0,u.zw)(i.value.DisplayName),1)]),0==n.value?((0,r.wg)(),(0,r.iD)("div",ue,[(0,r.Wm)(S,{Step:a.value},null,8,["Step"]),(0,r._)("button",{onClick:l[0]||(l[0]=e=>a.value=2),class:"signupBtn"}," SignUp "),(0,r._)("button",{onClick:l[1]||(l[1]=e=>a.value=1),class:"loginBtn"}," LogIn ")])):(0,r.kq)("",!0),1==n.value?((0,r.wg)(),(0,r.iD)("div",le,[3==a.value?((0,r.wg)(),(0,r.iD)("div",se,[(0,r.Wm)(ee,{CurrentUser:i.value},null,8,["CurrentUser"]),(0,r._)("button",{onClick:(0,t.iM)(p,["prevent"])}," Log Out ",8,oe)])):(0,r.kq)("",!0)])):(0,r.kq)("",!0)]))}};const ce=ie;var ve=ce;(0,t.ri)(ve).mount("#app")}},a={};function n(t){var r=a[t];if(void 0!==r)return r.exports;var u=a[t]={exports:{}};return e[t](u,u.exports,n),u.exports}n.m=e,function(){var e=[];n.O=function(a,t,r,u){if(!t){var l=1/0;for(c=0;c<e.length;c++){t=e[c][0],r=e[c][1],u=e[c][2];for(var s=!0,o=0;o<t.length;o++)(!1&u||l>=u)&&Object.keys(n.O).every((function(e){return n.O[e](t[o])}))?t.splice(o--,1):(s=!1,u<l&&(l=u));if(s){e.splice(c--,1);var i=r();void 0!==i&&(a=i)}}return a}u=u||0;for(var c=e.length;c>0&&e[c-1][2]>u;c--)e[c]=e[c-1];e[c]=[t,r,u]}}(),function(){n.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(a,{a:a}),a}}(),function(){n.d=function(e,a){for(var t in a)n.o(a,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){var e={143:0};n.O.j=function(a){return 0===e[a]};var a=function(a,t){var r,u,l=t[0],s=t[1],o=t[2],i=0;if(l.some((function(a){return 0!==e[a]}))){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(o)var c=o(n)}for(a&&a(t);i<l.length;i++)u=l[i],n.o(e,u)&&e[u]&&e[u][0](),e[u]=0;return n.O(c)},t=self["webpackChunkvue_kao_talk"]=self["webpackChunkvue_kao_talk"]||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))}();var t=n.O(void 0,[998],(function(){return n(9679)}));t=n.O(t)})();
//# sourceMappingURL=app.cfd4e707.js.map